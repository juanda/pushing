<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>


        <button type="button" id="btn_send" onclick="sendMessage()">send</button>

        <script>
            /*
             var conn = new WebSocket('ws://localhost:8080');
             
             conn.onopen = function(e) {
             
             console.log("Connection established!");
             };
             
             conn.onmessage = function(e) {
             console.log(e.data);
             };
             
             function sendMessage() {
             conn.send('Hello World!');
             }
             */
        </script>

        <script src="http://autobahn.s3.amazonaws.com/js/autobahn.min.js"></script>
        <script>
            var conn = new ab.Session(
                    'ws://localhost:8080' // The host (our Ratchet WebSocket server) to connect to
                    , function() {            // Once the connection has been established
                        conn.subscribe('kittensCategory', function(topic, data) {
                            // This is where you would add the new article to the DOM (beyond the scope of this tutorial)
                            console.log('New article published to category "' + topic + '" : ' + data.title);
                        });
                    }
            , function() {            // When the connection is closed
                console.warn('WebSocket connection closed');
            }
            , {// Additional parameters, we're ignoring the WAMP sub-protocol for older browsers
                'skipSubprotocolCheck': true
            }
            );

            conn.onopen = function(e) {

                console.log("Connection established!");
            };
        </script>

    </body>
</html>
